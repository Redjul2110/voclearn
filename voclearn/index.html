<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Vocab Master</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Poppins', sans-serif; }
    html, body { height: 100%; }
    body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); overflow: hidden; margin: 0; padding: 0; }
    
    .animated-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      overflow: hidden;
      z-index: 0;
    }

    .particle {
      position: absolute;
      pointer-events: none;
      opacity: 0.1;
      animation: float 20s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
      25% { transform: translateY(-50px) translateX(30px) rotate(90deg); }
      50% { transform: translateY(-100px) translateX(-30px) rotate(180deg); }
      75% { transform: translateY(-50px) translateX(30px) rotate(270deg); }
    }

    .content-wrapper {
      position: relative;
      z-index: 10;
      height: 100%;
      overflow-y: auto;
    }

    button, input, textarea, .card, .glass-card, .option-btn, .level-card {
      border-radius: 30px !important;
    }

    .level-card { border-radius: 40px !important; }
    .glass-card { border-radius: 35px !important; }

    .progress-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px !important;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b35 0%, #f7931e 100%);
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 20px !important;
      animation: progressGlow 2s ease-in-out infinite;
    }

    @keyframes progressGlow {
      0%, 100% { box-shadow: 0 0 10px rgba(255, 107, 53, 0.5); }
      50% { box-shadow: 0 0 20px rgba(255, 107, 53, 0.8); }
    }

    .streak-flame { animation: flameFlicker 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); }

    @keyframes flameFlicker {
      0%, 100% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.15) rotate(-3deg); }
      50% { transform: scale(1.25) rotate(3deg); }
      75% { transform: scale(1.15) rotate(-2deg); }
    }

    .option-btn {
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      border: 2px solid transparent;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border-radius: 30px !important;
      position: relative;
      overflow: hidden;
      animation: buttonAppear 0.5s ease-out backwards;
    }

    .option-btn:nth-child(1) { animation-delay: 0.1s; }
    .option-btn:nth-child(2) { animation-delay: 0.2s; }
    .option-btn:nth-child(3) { animation-delay: 0.3s; }
    .option-btn:nth-child(4) { animation-delay: 0.4s; }

    @keyframes buttonAppear {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .option-btn:hover:not(:disabled) {
      transform: translateY(-6px) scale(1.02);
      box-shadow: 0 15px 40px rgba(255, 107, 53, 0.3);
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 107, 53, 0.5);
    }

    .option-btn.selected {
      transform: scale(0.98);
      background: rgba(255, 107, 53, 0.2);
      border-color: rgba(255, 107, 53, 0.6);
    }

    .option-btn.correct {
      background: #10b981 !important;
      border-color: #059669 !important;
      animation: correctBounce 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .option-btn.wrong {
      background: #ef4444 !important;
      border-color: #dc2626 !important;
      animation: wrongShake 0.5s ease-in-out;
    }

    @keyframes correctBounce {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    @keyframes wrongShake {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(-12px) rotate(-2deg); }
      75% { transform: translateX(12px) rotate(2deg); }
    }

    .level-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      cursor: pointer;
      border-radius: 40px !important;
      animation: cardSlideIn 0.6s ease-out backwards;
    }

    .level-card:nth-child(1) { animation-delay: 0s; }
    .level-card:nth-child(2) { animation-delay: 0.1s; }
    .level-card:nth-child(3) { animation-delay: 0.2s; }

    @keyframes cardSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .level-card:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 107, 53, 0.5);
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 20px 50px rgba(255, 107, 53, 0.2);
    }

    .question-appear { animation: questionSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }

    @keyframes questionSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 35px !important;
      animation: glassAppear 0.6s ease-out;
    }

    @keyframes glassAppear {
      from {
        opacity: 0;
        backdrop-filter: blur(0px);
      }
      to {
        opacity: 1;
        backdrop-filter: blur(10px);
      }
    }

    .btn-primary {
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 10px 25px rgba(255, 107, 53, 0.25);
      border-radius: 30px !important;
      position: relative;
      overflow: hidden;
    }

    .btn-primary:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 40px rgba(255, 107, 53, 0.4);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      border: 1.5px solid rgba(255, 255, 255, 0.25);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      border-radius: 30px !important;
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.18);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-3px);
    }

    .confetti {
      position: fixed;
      pointer-events: none;
      animation: confettiFall 3.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    @keyframes confettiFall {
      to {
        transform: translateY(100vh) rotate(720deg) scale(0);
        opacity: 0;
      }
    }

    .title-appear { animation: titleBounceIn 1s cubic-bezier(0.34, 1.56, 0.64, 1); }

    @keyframes titleBounceIn {
      0% {
        opacity: 0;
        transform: scale(0.3) translateY(-30px);
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: scale(1) translateY(0);
      }
    }

    .mode-card { animation: modeSlideIn 0.7s ease-out backwards; }
    .mode-card:nth-child(1) { animation-delay: 0.2s; }
    .mode-card:nth-child(2) { animation-delay: 0.35s; }

    @keyframes modeSlideIn {
      from {
        opacity: 0;
        transform: translateX(-40px) scale(0.85);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    .fade-in { animation: fadeIn 0.5s ease-out; }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .bounce { animation: bounce 1s ease-out; }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .glow-text { animation: glowPulse 2s ease-in-out infinite; }

    @keyframes glowPulse {
      0%, 100% { filter: drop-shadow(0 0 5px rgba(255, 107, 53, 0.5)); }
      50% { filter: drop-shadow(0 0 15px rgba(255, 107, 53, 0.8)); }
    }

    .text-input {
      background: rgba(255, 255, 255, 0.1) !important;
      border: 1.5px solid rgba(255, 255, 255, 0.25) !important;
      color: white !important;
      padding: 12px 20px !important;
      border-radius: 25px !important;
    }

    .text-input::placeholder { color: rgba(255, 255, 255, 0.5); }
    .text-input:focus { background: rgba(255, 255, 255, 0.15) !important; border-color: rgba(255, 107, 53, 0.6) !important; }

    .vocab-item {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 25px;
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: slideInVocab 0.4s ease-out;
    }

    @keyframes slideInVocab {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .loading-spinner {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top: 3px solid #ff6b35;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error-message {
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.5);
      color: #fca5a5;
      padding: 12px 16px;
      border-radius: 20px;
      text-align: center;
      animation: slideInError 0.3s ease-out;
    }

    @keyframes slideInError {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .success-message {
      background: rgba(16, 185, 129, 0.2);
      border: 1px solid rgba(16, 185, 129, 0.5);
      color: #86efac;
      padding: 12px 16px;
      border-radius: 20px;
      text-align: center;
      animation: slideInSuccess 0.3s ease-out;
    }

    @keyframes slideInSuccess {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full m-0 p-0">
  <div class="animated-bg">
   <div class="particle" style="width: 100px; height: 100px; left: 10%; top: 20%; border-radius: 50%; background: #ff6b35;"></div>
   <div class="particle" style="width: 150px; height: 150px; left: 80%; top: 10%; border-radius: 50%; background: #f7931e; animation-delay: 2s;"></div>
   <div class="particle" style="width: 80px; height: 80px; left: 50%; top: 70%; border-radius: 50%; background: #ef4444; animation-delay: 4s;"></div>
   <div class="particle" style="width: 120px; height: 120px; left: 20%; top: 60%; border-radius: 50%; background: #10b981; animation-delay: 6s;"></div>
  </div>
  <div class="content-wrapper">
   <main id="app" class="min-h-full w-full flex flex-col items-center justify-center p-6"><!-- Home Screen -->
    <div id="home-screen" class="w-full max-w-4xl text-center">
     <div class="mb-12">
      <div class="flex justify-center mb-6"><a href="https://redjul2110.github.io/RedJGames/" target="_blank" rel="noopener noreferrer" class="text-white/60 hover:text-white transition-colors text-sm font-semibold hover:underline"> üéÆ More Games </a>
      </div>
      <h1 id="app-title" class="text-6xl md:text-7xl font-extrabold text-transparent bg-clip-text title-appear" style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); animation-name: titleBounceIn;">üåç English Vocab Master</h1>
      <p id="app-subtitle" class="text-white/70 text-2xl mt-6 font-medium fade-in" style="animation-delay: 0.5s;">Learn &amp; Master English</p>
     </div>
     <p class="text-white/80 text-center mb-10 text-lg font-semibold fade-in" style="animation-delay: 0.7s;">Choose Your Mode</p>
     <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 fade-in" style="animation-delay: 0.9s;"><button class="level-card mode-btn" data-mode="preset">
       <div class="p-12 text-center">
        <div class="text-6xl mb-4">
         üìö
        </div>
        <p class="text-white font-bold text-3xl mb-2">Preset Levels</p>
        <p class="text-white/60 text-lg">Learn from pre-made vocabs by grade</p>
       </div></button> <button class="level-card mode-btn" data-mode="custom">
       <div class="p-12 text-center">
        <div class="text-6xl mb-4">
         ‚úèÔ∏è
        </div>
        <p class="text-white font-bold text-3xl mb-2">Custom Learning</p>
        <p class="text-white/60 text-lg">Add &amp; learn your own vocabs</p>
       </div></button>
     </div>
    </div><!-- Preset Levels Screen -->
    <div id="preset-screen" class="hidden w-full max-w-4xl text-center"><button class="text-white/70 hover:text-white transition-colors text-lg font-semibold hover:underline mb-12 inline-block transform hover:scale-110 duration-300" id="btn-back-preset"> ‚Üê Back </button>
     <p class="text-white/80 text-center mb-10 text-lg font-semibold fade-in">Select Your Grade</p>
     <div id="grades-container" class="grid grid-cols-2 md:grid-cols-3 gap-6 mb-8 fade-in"><button class="level-card grade-btn" data-level="5">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         üü¢
        </div>
        <p class="text-white font-bold text-2xl">Grade 5</p>
       </div></button> <button class="level-card grade-btn" data-level="6">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         üü°
        </div>
        <p class="text-white font-bold text-2xl">Grade 6</p>
       </div></button> <button class="level-card grade-btn" data-level="7">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         üü†
        </div>
        <p class="text-white font-bold text-2xl">Grade 7</p>
       </div></button> <button class="level-card grade-btn" data-level="8">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         üî¥
        </div>
        <p class="text-white font-bold text-2xl">Grade 8</p>
       </div></button> <button class="level-card grade-btn" data-level="9">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         üî•
        </div>
        <p class="text-white font-bold text-2xl">Grade 9</p>
       </div></button> <button class="level-card grade-btn" data-level="10">
       <div class="p-10 text-center">
        <div class="text-5xl mb-4">
         ‚ö°
        </div>
        <p class="text-white font-bold text-2xl">Grade 10</p>
       </div></button>
     </div>
    </div><!-- Custom Vocab Screen -->
    <div id="custom-screen" class="hidden w-full max-w-2xl"><button class="text-white/70 hover:text-white transition-colors text-lg font-semibold hover:underline mb-8 inline-block transform hover:scale-110 duration-300" id="btn-back-custom"> ‚Üê Back </button>
     <div class="glass-card p-8 mb-8">
      <h2 class="text-3xl font-bold text-white mb-6">‚ûï Add Custom Vocabs</h2>
      <div id="add-vocab-message"></div>
      <div class="flex gap-3 mb-6"><input type="text" id="input-en" class="text-input flex-1" placeholder="English word"> <input type="text" id="input-de" class="text-input flex-1" placeholder="Deutsches Wort"> <button id="btn-add-vocab" class="btn-primary px-6 py-3 text-white font-semibold whitespace-nowrap"> Add </button>
      </div>
      <div id="vocab-list" class="space-y-3 mb-8 max-h-64 overflow-y-auto">
      </div><button id="btn-learn-custom" class="btn-primary w-full py-3 text-white font-semibold disabled:opacity-50" disabled> üéì Start Learning (<span id="vocab-count">0</span>) </button>
     </div>
    </div><!-- Direction Selection Screen -->
    <div id="direction-screen" class="hidden w-full max-w-4xl text-center"><button class="text-white/70 hover:text-white transition-colors text-lg font-semibold hover:underline mb-12 inline-block transform hover:scale-110 duration-300" id="btn-back-direction"> ‚Üê Back </button>
     <p class="text-white/80 text-center mb-12 text-xl font-semibold fade-in" id="direction-text">Choose Translation Direction</p>
     <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"><button class="direction-btn level-card" data-direction="de-to-en">
       <div class="p-12 text-center">
        <div class="text-6xl mb-4">
         üá©üá™ ‚Üí üá¨üáß
        </div>
        <p class="text-white font-bold text-3xl mb-2">Deutsch ‚Üí English</p>
        <p class="text-white/60 text-lg">See German, answer English</p>
       </div></button> <button class="direction-btn level-card" data-direction="en-to-de">
       <div class="p-12 text-center">
        <div class="text-6xl mb-4">
         üá¨üáß ‚Üí üá©üá™
        </div>
        <p class="text-white font-bold text-3xl mb-2">English ‚Üí Deutsch</p>
        <p class="text-white/60 text-lg">See English, answer German</p>
       </div></button>
     </div>
    </div><!-- Learning Style Screen -->
    <div id="style-screen" class="hidden w-full max-w-4xl text-center"><button class="text-white/70 hover:text-white transition-colors text-lg font-semibold hover:underline mb-12 inline-block transform hover:scale-110 duration-300" id="btn-back-style"> ‚Üê Back </button>
     <p class="text-white/80 text-center mb-12 text-xl font-semibold fade-in" id="style-text">Choose Your Learning Style</p>
     <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12"><button class="style-btn level-card" data-style="typing">
       <div class="p-10 text-center">
        <div class="text-6xl mb-4">
         ‚å®Ô∏è
        </div>
        <p class="text-white font-bold text-2xl">Typing</p>
        <p class="text-white/60 text-sm">Write answers</p>
       </div></button> <button class="style-btn level-card" data-style="choice">
       <div class="p-10 text-center">
        <div class="text-6xl mb-4">
         ‚úÖ
        </div>
        <p class="text-white font-bold text-2xl">Multiple Choice</p>
        <p class="text-white/60 text-sm">Select answers</p>
       </div></button> <button class="style-btn level-card" data-style="mixed">
       <div class="p-10 text-center">
        <div class="text-6xl mb-4">
         üé≤
        </div>
        <p class="text-white font-bold text-2xl">Mixed</p>
        <p class="text-white/60 text-sm">Both modes</p>
       </div></button>
     </div>
    </div><!-- Game Screen -->
    <div id="game-screen" class="hidden w-full max-w-2xl">
     <div class="flex justify-between items-center mb-8 fade-in"><button id="btn-back-game" class="text-white/70 hover:text-white transition-colors text-lg font-semibold hover:underline transform hover:scale-110 duration-300"> ‚Üê Back </button>
      <div class="text-center">
       <div class="flex items-center justify-center gap-2 mb-2"><span class="text-3xl glow-text">üî•</span> <span id="streak-count" class="text-3xl font-extrabold text-transparent bg-clip-text" style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);">0</span>
       </div>
       <p class="text-white/60 text-xs">Win Streak</p>
      </div>
      <div class="text-center">
       <p id="level-display" class="text-white font-bold text-lg">Grade 5</p>
       <p id="question-progress" class="text-white/60 text-xs">1/10</p>
      </div>
     </div>
     <div class="progress-bar mb-8">
      <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
     </div>
     <div class="mb-10 question-appear">
      <div class="glass-card p-8 text-center">
       <p class="text-white/70 text-sm font-semibold mb-3 uppercase tracking-wider" id="instruction-text">Select the correct translation</p>
       <p id="question-text" class="text-4xl md:text-5xl font-extrabold text-white glow-text">Hello</p>
      </div>
     </div><!-- Multiple Choice Mode -->
     <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
     </div><!-- Typing Mode -->
     <div id="typing-mode" class="hidden mb-10"><input type="text" id="typing-input" class="text-input w-full text-center text-xl py-4 mb-4" placeholder="Type the answer...">
      <div id="typing-feedback" class="mb-4"></div>
     </div>
     <div class="flex gap-4 justify-center fade-in" style="animation-delay: 0.5s;"><button id="btn-skip" class="btn-secondary px-8 py-3 text-white font-semibold transition-all transform hover:scale-105 duration-300"> Skip </button> <button id="btn-submit" class="btn-primary px-8 py-3 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 duration-300" disabled> Check Answer </button>
     </div>
    </div><!-- Completion Screen -->
    <div id="completion-screen" class="hidden w-full max-w-2xl text-center">
     <div class="mb-8 fade-in">
      <div class="text-8xl mb-6 bounce">
       üéâ
      </div>
      <h2 class="text-5xl font-extrabold text-white mb-2 glow-text">Amazing!</h2>
      <p class="text-white/70 text-lg mb-8">You completed the lesson!</p>
      <div class="glass-card p-8 mb-8">
       <div class="flex items-center justify-center gap-3 mb-2"><span class="text-5xl glow-text">üî•</span> <span id="final-streak" class="text-5xl font-extrabold text-transparent bg-clip-text" style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);">0</span>
       </div>
       <p class="text-white text-lg">Current Streak</p>
      </div>
      <div class="grid grid-cols-2 gap-4 mb-10">
       <div class="glass-card p-6">
        <p id="final-correct" class="text-4xl font-bold text-green-400">0</p>
        <p class="text-white/70 text-sm mt-2">Correct</p>
       </div>
       <div class="glass-card p-6">
        <p id="final-accuracy" class="text-4xl font-bold text-blue-400">0%</p>
        <p class="text-white/70 text-sm mt-2">Accuracy</p>
       </div>
      </div>
     </div>
     <div class="flex gap-4 justify-center flex-col md:flex-row"><button id="btn-next-level" class="btn-primary px-8 py-3 text-white font-semibold transition-all flex-1 transform hover:scale-105 duration-300"> Next Level ‚Üí </button> <button id="btn-menu" class="btn-secondary px-8 py-3 text-white font-semibold transition-all flex-1 transform hover:scale-105 duration-300"> Main Menu </button>
     </div>
    </div>
   </main>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'üåç English Vocab Master',
      subtitle: 'Learn & Master English',
      primary_color: '#ff6b35',
      secondary_color: '#f7931e',
      accent_color: '#ef4444',
      text_color: '#ffffff',
      font_family: 'Poppins',
      font_size: 16
    };

    const vocabularyByLevel = {
      5: [
        { en: 'Hello', de: 'Hallo' }, { en: 'Thank you', de: 'Danke' }, { en: 'Yes', de: 'Ja' },
        { en: 'No', de: 'Nein' }, { en: 'Please', de: 'Bitte' }, { en: 'Goodbye', de: 'Auf Wiedersehen' },
        { en: 'Water', de: 'Wasser' }, { en: 'Food', de: 'Essen' }, { en: 'Friend', de: 'Freund' },
        { en: 'Family', de: 'Familie' }, { en: 'House', de: 'Haus' }, { en: 'School', de: 'Schule' },
        { en: 'Dog', de: 'Hund' }, { en: 'Cat', de: 'Katze' }, { en: 'Apple', de: 'Apfel' },
        { en: 'Bread', de: 'Brot' }, { en: 'Milk', de: 'Milch' }, { en: 'Book', de: 'Buch' },
        { en: 'Pen', de: 'Stift' }, { en: 'Desk', de: 'Schreibtisch' }
      ],
      6: [
        { en: 'Beautiful', de: 'Sch√∂n' }, { en: 'Happy', de: 'Gl√ºcklich' }, { en: 'Strong', de: 'Stark' },
        { en: 'Quick', de: 'Schnell' }, { en: 'Slow', de: 'Langsam' }, { en: 'Big', de: 'Gro√ü' },
        { en: 'Small', de: 'Klein' }, { en: 'Hot', de: 'Hei√ü' }, { en: 'Cold', de: 'Kalt' },
        { en: 'New', de: 'Neu' }, { en: 'Old', de: 'Alt' }, { en: 'Expensive', de: 'Teuer' },
        { en: 'Cheap', de: 'Billig' }, { en: 'Difficult', de: 'Schwierig' }, { en: 'Easy', de: 'Einfach' },
        { en: 'Interesting', de: 'Interessant' }, { en: 'Boring', de: 'Langweilig' }, { en: 'Tired', de: 'M√ºde' },
        { en: 'Angry', de: 'W√ºtend' }, { en: 'Sad', de: 'Traurig' }
      ],
      7: [
        { en: 'Magnificent', de: 'Herrlich' }, { en: 'Mysterious', de: 'Geheimnisvoll' }, { en: 'Fascinating', de: 'Faszinierend' },
        { en: 'Tremendous', de: 'Enorm' }, { en: 'Delicious', de: 'K√∂stlich' }, { en: 'Elegant', de: 'Elegant' },
        { en: 'Brilliant', de: 'Gl√§nzend' }, { en: 'Humble', de: 'Bescheiden' }, { en: 'Generous', de: 'Gro√üz√ºgig' },
        { en: 'Courageous', de: 'Mutig' }, { en: 'Ambitious', de: 'Ehrgeizig' }, { en: 'Grateful', de: 'Dankbar' },
        { en: 'Jealous', de: 'Eifers√ºchtig' }, { en: 'Confident', de: 'Selbstbewusst' }, { en: 'Nervous', de: 'Nerv√∂s' },
        { en: 'Optimistic', de: 'Optimistisch' }, { en: 'Pessimistic', de: 'Pessimistisch' }, { en: 'Curious', de: 'Neugierig' },
        { en: 'Modest', de: 'Bescheiden' }, { en: 'Arrogant', de: 'Arrogant' }
      ],
      8: [
        { en: 'Ephemeral', de: 'Kurzlebig' }, { en: 'Serendipity', de: 'Gl√ºcklicher Zufall' }, { en: 'Ubiquitous', de: 'Allgegenw√§rtig' },
        { en: 'Melancholy', de: 'Wehmut' }, { en: 'Eloquent', de: 'Beredt' }, { en: 'Pragmatic', de: 'Pragmatisch' },
        { en: 'Zealous', de: 'Eifrig' }, { en: 'Nostalgic', de: 'Nostalgisch' }, { en: 'Candid', de: 'Aufrichtig' },
        { en: 'Meticulous', de: 'Sorgf√§ltig' }, { en: 'Ambiguous', de: 'Mehrdeutig' }, { en: 'Benign', de: 'Wohlwollend' },
        { en: 'Caustic', de: '√Ñtzend' }, { en: 'Diffident', de: 'Sch√ºchtern' }, { en: 'Ebullient', de: '√úberschw√§nglich' },
        { en: 'Fastidious', de: 'W√§hlerisch' }, { en: 'Gregarious', de: 'Gesellig' }, { en: 'Imperturbable', de: 'Unersch√ºtterlich' },
        { en: 'Jocular', de: 'Humorisch' }, { en: 'Labyrinthine', de: 'Labyrinthisch' }
      ],
      9: [
        { en: 'Obfuscate', de: 'Verschleiern' }, { en: 'Perspicacious', de: 'Scharfsinnig' }, { en: 'Ineffable', de: 'Unsagbar' },
        { en: 'Sesquipedalian', de: 'Weitschweifig' }, { en: 'Sycophant', de: 'Speichellecker' }, { en: 'Pellucid', de: 'Klar' },
        { en: 'Querulous', de: 'N√∂rgelnd' }, { en: 'Petulant', de: 'Launisch' }, { en: 'Loquacious', de: 'Geschw√§tzig' },
        { en: 'Insouciant', de: 'Sorglos' }, { en: 'Pernicious', de: 'Verderblich' }, { en: 'Salient', de: 'Hervorstechend' },
        { en: 'Taciturn', de: 'Wortkarg' }, { en: 'Tenacious', de: 'Z√§h' }, { en: 'Turgid', de: 'Aufgeschwollen' },
        { en: 'Unctuous', de: '√ñlig' }, { en: 'Veracity', de: 'Wahrheitsliebe' }, { en: 'Vicarious', de: 'Stellvertretend' },
        { en: 'Vindictive', de: 'Rachs√ºchtig' }, { en: 'Vituperative', de: 'Ausfallend' }
      ],
      10: [
        { en: 'Circumlocution', de: 'Umschreibung' }, { en: 'Pusillanimous', de: 'Feige' }, { en: 'Recalcitrant', de: 'Widerspenstig' },
        { en: 'Ostentatious', de: 'Prahlerisch' }, { en: 'Perspicuous', de: 'Verst√§ndlich' }, { en: 'Magnanimous', de: 'Gro√üherzig' },
        { en: 'Egregious', de: 'Ungeheuerlich' }, { en: 'Propitious', de: 'G√ºnstig' }, { en: 'Sanguine', de: 'Optimistisch' },
        { en: 'Indefatigable', de: 'Unerm√ºdlich' }, { en: 'Perfunctory', de: 'Oberfl√§chlich' }, { en: 'Redolent', de: 'Duftend' },
        { en: 'Sacrosanct', de: 'Unantastbar' }, { en: 'Sanguinary', de: 'Blutig' }, { en: 'Sedulous', de: 'Emsig' },
        { en: 'Surreptitious', de: 'Heimlich' }, { en: 'Sybaritic', de: 'Genussabh√§ngig' }, { en: 'Symbiotic', de: 'Symbiotisch' },
        { en: 'Tautological', de: 'Tautologisch' }, { en: 'Transcendent', de: 'Transzendent' }
      ]
    };

    let gameState = {
      currentLevel: null,
      currentCardIndex: 0,
      streak: 0,
      correctCount: 0,
      totalAttempts: 0,
      selectedOption: null,
      answered: false,
      cardsShuffle: [],
      direction: 'de-to-en',
      style: 'choice',
      isCustom: false,
      currentStyleMode: null
    };

    let customVocabs = [];
    let allStoredVocabs = [];

    const elements = {
      homeScreen: document.getElementById('home-screen'),
      presetScreen: document.getElementById('preset-screen'),
      customScreen: document.getElementById('custom-screen'),
      directionScreen: document.getElementById('direction-screen'),
      styleScreen: document.getElementById('style-screen'),
      gameScreen: document.getElementById('game-screen'),
      completionScreen: document.getElementById('completion-screen'),
      modeButtons: document.querySelectorAll('.mode-btn'),
      gradeButtons: document.querySelectorAll('.grade-btn'),
      directionButtons: document.querySelectorAll('.direction-btn'),
      styleButtons: document.querySelectorAll('.style-btn'),
      btnBackPreset: document.getElementById('btn-back-preset'),
      btnBackCustom: document.getElementById('btn-back-custom'),
      btnBackDirection: document.getElementById('btn-back-direction'),
      btnBackStyle: document.getElementById('btn-back-style'),
      btnBackGame: document.getElementById('btn-back-game'),
      btnSubmit: document.getElementById('btn-submit'),
      btnSkip: document.getElementById('btn-skip'),
      btnNextLevel: document.getElementById('btn-next-level'),
      btnMenu: document.getElementById('btn-menu'),
      questionText: document.getElementById('question-text'),
      optionsContainer: document.getElementById('options-container'),
      streakCount: document.getElementById('streak-count'),
      levelDisplay: document.getElementById('level-display'),
      questionProgress: document.getElementById('question-progress'),
      progressFill: document.getElementById('progress-fill'),
      finalStreak: document.getElementById('final-streak'),
      finalCorrect: document.getElementById('final-correct'),
      finalAccuracy: document.getElementById('final-accuracy'),
      typingInput: document.getElementById('typing-input'),
      typingMode: document.getElementById('typing-mode'),
      typingFeedback: document.getElementById('typing-feedback'),
      vocabList: document.getElementById('vocab-list'),
      btnAddVocab: document.getElementById('btn-add-vocab'),
      inputEn: document.getElementById('input-en'),
      inputDe: document.getElementById('input-de'),
      btnLearnCustom: document.getElementById('btn-learn-custom'),
      vocabCount: document.getElementById('vocab-count'),
      addVocabMessage: document.getElementById('add-vocab-message'),
      instructionText: document.getElementById('instruction-text')
    };

    const dataHandler = {
      onDataChanged(data) {
        allStoredVocabs = data || [];
        updateVocabList();
      }
    };

    async function initData() {
      const result = await window.dataSdk.init(dataHandler);
      if (result.isError) {
        console.error('Data SDK init failed');
      }
    }

    function updateVocabList() {
      elements.vocabList.innerHTML = '';
      customVocabs.forEach((vocab, idx) => {
        const item = document.createElement('div');
        item.className = 'vocab-item';
        item.innerHTML = `
          <div class="text-left flex-1">
            <span class="text-white font-semibold">${vocab.english}</span>
            <span class="text-white/50 mx-2">‚Üí</span>
            <span class="text-white/70">${vocab.german}</span>
          </div>
          <button class="text-red-400 hover:text-red-300 text-sm font-semibold" onclick="deleteVocab(${idx})">‚úï</button>
        `;
        elements.vocabList.appendChild(item);
      });

      elements.btnLearnCustom.disabled = customVocabs.length < 5;
      elements.vocabCount.textContent = customVocabs.length;
    }

    function deleteVocab(idx) {
      customVocabs.splice(idx, 1);
      updateVocabList();
    }

    async function addVocab() {
      const en = elements.inputEn.value.trim();
      const de = elements.inputDe.value.trim();

      if (!en || !de) {
        showMessage('Please fill in both fields', false);
        return;
      }

      if (customVocabs.some(v => v.english.toLowerCase() === en.toLowerCase())) {
        showMessage('This word already exists', false);
        return;
      }

      const vocabData = {
        english: en,
        german: de,
        difficulty: 'custom',
        createdAt: new Date().toISOString()
      };

      elements.btnAddVocab.disabled = true;
      const result = await window.dataSdk.create(vocabData);
      elements.btnAddVocab.disabled = false;

      if (result.isOk) {
        customVocabs.push(vocabData);
        elements.inputEn.value = '';
        elements.inputDe.value = '';
        showMessage('‚úÖ Vocab added!', true);
        updateVocabList();
      } else {
        showMessage('Error adding vocab', false);
      }
    }

    function showMessage(text, success) {
      elements.addVocabMessage.innerHTML = `<div class="${success ? 'success-message' : 'error-message'}">${text}</div>`;
      setTimeout(() => {
        elements.addVocabMessage.innerHTML = '';
      }, 2000);
    }

    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function hideAllScreens() {
      elements.homeScreen.classList.add('hidden');
      elements.presetScreen.classList.add('hidden');
      elements.customScreen.classList.add('hidden');
      elements.directionScreen.classList.add('hidden');
      elements.styleScreen.classList.add('hidden');
      elements.gameScreen.classList.add('hidden');
      elements.completionScreen.classList.add('hidden');
    }

    elements.modeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        if (btn.dataset.mode === 'preset') {
          hideAllScreens();
          elements.presetScreen.classList.remove('hidden');
        } else {
          hideAllScreens();
          elements.customScreen.classList.remove('hidden');
        }
      });
    });

    elements.btnBackPreset.addEventListener('click', () => {
      hideAllScreens();
      elements.homeScreen.classList.remove('hidden');
    });

    elements.btnBackCustom.addEventListener('click', () => {
      hideAllScreens();
      elements.homeScreen.classList.remove('hidden');
    });

    elements.gradeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        gameState.currentLevel = parseInt(btn.dataset.level);
        gameState.isCustom = false;
        hideAllScreens();
        elements.directionScreen.classList.remove('hidden');
        document.getElementById('direction-text').textContent = `Grade ${gameState.currentLevel} - Choose Translation Direction`;
      });
    });

    elements.directionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        gameState.direction = btn.dataset.direction;
        hideAllScreens();
        elements.styleScreen.classList.remove('hidden');
        document.getElementById('style-text').textContent = 'Choose Your Learning Style';
      });
    });

    elements.styleButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        gameState.style = btn.dataset.style;
        startLevel();
      });
    });

    elements.btnBackDirection.addEventListener('click', () => {
      hideAllScreens();
      elements.presetScreen.classList.remove('hidden');
    });

    elements.btnBackStyle.addEventListener('click', () => {
      hideAllScreens();
      elements.directionScreen.classList.remove('hidden');
    });

    elements.btnAddVocab.addEventListener('click', addVocab);

    elements.inputEn.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') addVocab();
    });

    elements.inputDe.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') addVocab();
    });

    elements.btnLearnCustom.addEventListener('click', () => {
      if (customVocabs.length < 5) return;
      gameState.currentLevel = null;
      gameState.isCustom = true;
      hideAllScreens();
      elements.directionScreen.classList.remove('hidden');
      document.getElementById('direction-text').textContent = 'Choose Translation Direction';
    });

    function startLevel() {
      gameState.currentCardIndex = 0;
      gameState.streak = 0;
      gameState.correctCount = 0;
      gameState.totalAttempts = 0;
      gameState.selectedOption = null;
      gameState.answered = false;

      const vocabSet = gameState.isCustom ? customVocabs : vocabularyByLevel[gameState.currentLevel];
      gameState.cardsShuffle = shuffle(vocabSet).slice(0, 10);

      hideAllScreens();
      elements.gameScreen.classList.remove('hidden');

      if (gameState.isCustom) {
        elements.levelDisplay.textContent = 'Custom Learning';
      } else {
        elements.levelDisplay.textContent = `Grade ${gameState.currentLevel}`;
      }

      loadCard();
    }

    function loadCard() {
      gameState.selectedOption = null;
      gameState.answered = false;
      elements.btnSubmit.disabled = true;
      elements.typingInput.value = '';
      elements.typingFeedback.innerHTML = '';

      const card = gameState.cardsShuffle[gameState.currentCardIndex];
      const isQuestion = gameState.direction === 'de-to-en' ? card.de : card.en;
      const correctAnswer = gameState.direction === 'de-to-en' ? card.en : card.de;

      elements.questionText.textContent = isQuestion;
      elements.questionProgress.textContent = `${gameState.currentCardIndex + 1}/10`;
      const progress = ((gameState.currentCardIndex) / 10) * 100;
      elements.progressFill.style.width = progress + '%';

      // Determine current mode for this question
      let currentMode = gameState.style;
      if (gameState.style === 'mixed') {
        currentMode = Math.random() > 0.5 ? 'typing' : 'choice';
      }
      gameState.currentStyleMode = currentMode;

      if (currentMode === 'typing') {
        elements.optionsContainer.classList.add('hidden');
        elements.typingMode.classList.remove('hidden');
        elements.instructionText.textContent = 'Type the correct translation';
        elements.typingInput.focus();
      } else {
        elements.optionsContainer.classList.remove('hidden');
        elements.typingMode.classList.add('hidden');
        elements.instructionText.textContent = 'Select the correct translation';

        const options = [correctAnswer];
        const allCards = gameState.isCustom ? customVocabs : vocabularyByLevel[gameState.currentLevel];

        while (options.length < 4) {
          const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
          const randomOption = gameState.direction === 'de-to-en' ? randomCard.en : randomCard.de;
          if (!options.includes(randomOption)) {
            options.push(randomOption);
          }
        }

        const shuffledOptions = shuffle(options);
        elements.optionsContainer.innerHTML = '';
        shuffledOptions.forEach((option) => {
          const btn = document.createElement('button');
          btn.className = 'option-btn p-6 text-white font-semibold text-lg';
          btn.textContent = option;
          btn.onclick = () => selectOption(btn, option, correctAnswer);
          elements.optionsContainer.appendChild(btn);
        });
      }
    }

    function selectOption(btn, selected, correct) {
      if (gameState.answered) return;

      gameState.selectedOption = selected;
      const buttons = document.querySelectorAll('.option-btn');
      buttons.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      elements.btnSubmit.disabled = false;
    }

    elements.typingInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !elements.btnSubmit.disabled) {
        checkAnswer();
      }
    });

    function checkAnswer() {
      if (gameState.answered) return;
      gameState.answered = true;

      const card = gameState.cardsShuffle[gameState.currentCardIndex];
      const correctAnswer = gameState.direction === 'de-to-en' ? card.en : card.de;
      let isCorrect = false;

      if (gameState.currentStyleMode === 'typing') {
        const userAnswer = elements.typingInput.value.trim().toLowerCase();
        isCorrect = userAnswer === correctAnswer.toLowerCase();

        if (isCorrect) {
          elements.typingFeedback.innerHTML = '<div class="success-message">‚úÖ Correct!</div>';
        } else {
          elements.typingFeedback.innerHTML = `<div class="error-message">‚ùå Wrong! Answer: ${correctAnswer}</div>`;
        }
      } else {
        isCorrect = gameState.selectedOption === correctAnswer;
        const buttons = document.querySelectorAll('.option-btn');

        buttons.forEach(btn => {
          if (btn.textContent === correctAnswer) {
            btn.classList.add('correct');
          } else if (btn.textContent === gameState.selectedOption && !isCorrect) {
            btn.classList.add('wrong');
          }
          btn.disabled = true;
        });
      }

      gameState.totalAttempts++;
      if (isCorrect) {
        gameState.correctCount++;
        gameState.streak++;
        elements.streakCount.classList.add('streak-flame');
        elements.streakCount.textContent = gameState.streak;
        setTimeout(() => elements.streakCount.classList.remove('streak-flame'), 800);
      } else {
        gameState.streak = 0;
        elements.streakCount.textContent = '0';
      }

      elements.btnSubmit.disabled = true;

      setTimeout(() => {
        gameState.currentCardIndex++;
        if (gameState.currentCardIndex < 10) {
          loadCard();
        } else {
          showCompletion();
        }
      }, 1500);
    }

    function skipCard() {
      gameState.currentCardIndex++;
      gameState.totalAttempts++;
      gameState.streak = 0;
      elements.streakCount.textContent = '0';

      if (gameState.currentCardIndex < 10) {
        loadCard();
      } else {
        showCompletion();
      }
    }

    function showCompletion() {
      hideAllScreens();
      elements.completionScreen.classList.remove('hidden');

      const accuracy = Math.round((gameState.correctCount / 10) * 100);
      elements.finalStreak.textContent = gameState.streak;
      elements.finalCorrect.textContent = gameState.correctCount;
      elements.finalAccuracy.textContent = accuracy + '%';

      createConfetti();
    }

    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti text-3xl';
        confetti.textContent = ['üéâ', '‚≠ê', 'üåü', '‚ú®', 'üî•'][Math.floor(Math.random() * 5)];
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-20px';
        confetti.style.delay = Math.random() * 0.5 + 's';
        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 3500);
      }
    }

    elements.btnBackGame.addEventListener('click', () => {
      hideAllScreens();
      elements.homeScreen.classList.remove('hidden');
    });

    elements.btnSubmit.addEventListener('click', checkAnswer);
    elements.btnSkip.addEventListener('click', skipCard);

    elements.btnNextLevel.addEventListener('click', () => {
      if (gameState.isCustom) {
        hideAllScreens();
        elements.homeScreen.classList.remove('hidden');
      } else {
        const nextLevel = Math.min(gameState.currentLevel + 1, 10);
        if (nextLevel <= 10) {
          gameState.currentLevel = nextLevel;
          gameState.isCustom = false;
          hideAllScreens();
          elements.directionScreen.classList.remove('hidden');
          document.getElementById('direction-text').textContent = `Grade ${gameState.currentLevel} - Choose Translation Direction`;
        }
      }
    });

    elements.btnMenu.addEventListener('click', () => {
      location.reload();
    });

    async function onConfigChange(config) {
      document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
      document.getElementById('app-subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.body.style.fontFamily = `${config.font_family || defaultConfig.font_family}, sans-serif`;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => { config.primary_color = value; window.elementSdk.setConfig({ primary_color: value }); }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => { config.secondary_color = value; window.elementSdk.setConfig({ secondary_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => { config.font_size = value; window.elementSdk.setConfig({ font_size: value }); }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['subtitle', config.subtitle || defaultConfig.subtitle]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    initData();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cd5c93fb040dbff',t:'MTc3MTAwMTAyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
